https://funteas.com/topic/5a64e9482630e6f31583701d




浏览器以进程为单位
正常情况下每个标签页相当于一个进程

#一个浏览器通常包括哪些进程: 以谷歌浏览器为例
> a.Browser进程
	负责页面显示,
	页面管理（销毁创建线程）
	与Renderer进行通信
	管理网络资源的下载等
> b.第三方插件进程
> c.GUI进程
> d.浏览器渲染进程（浏览器内核）（Renderer进程，内部是多线程的!）：默认每个Tab页面一个进程，互不影响


#浏览器渲染进程（浏览器内核）  多线程的！！！
##责任
主要负责页面的渲染，JS的执行，事件的循环
##GUI渲染线程
	```
	解析HTML，CSS，构建DOM树和RenderObject树
	当界面需要重绘（Repaint）或由于某种操作引发回流(reflow)时，该线程就会执行
	GUI渲染线程与JS引擎线程是互斥的，当JS引擎执行时GUI线程会被挂起
	```
##JS引擎线程
	```
	执行js 如V8引擎
	```
##事件触发线程
	```
	JS引擎自己都忙不过来，需要浏览器另开线程协助
	如setTimeOut，鼠标点击、AJAX异步请求会将对应任务添加到事件线程
	```
##定时触发器线程
	```
	setInternal与setTimeout所在线程
	```
##异步http请求线程
	```
	在XMLHttpRequest在连接后是通过浏览器新开一个线程请求
	将检测到状态变更时，如果设置有回调函数，异步线程就产生状态变更事件，将这个回调再放入事件队列中。再由JavaScript引擎执行。
	```

#Browser进程和Render进程的通信
	```
	Browser进程收到用户请求，首先需要获取页面内容（譬如通过网络下载资源），随后将该任务通过RendererHost接口传递给Render进程
	Renderer进程的Renderer接口收到消息，简单解释后，交给渲染线程，然后开始渲染
	渲染线程接收请求，加载网页并渲染网页，这其中可能需要Browser进程获取资源和需要GPU进程来帮助渲染
	当然可能会有JS线程操作DOM（这样可能会造成回流并重绘）
	最后Render进程将结果传递给Browser进程
	Browser进程接收到结果并将结果绘制出来
	```
	主要是 Browser Render

#js执行机制
类似Event loop
	```
	js分同步任务与异步任务
	同步任务由主线程执行， 形成一个执行栈
	主线程之外，事件触发线程管理着一个任务队列，只要异步任务有了运行结果，就在任务队列之中放置一个事件（异步任务的回调方法）
	一旦执行栈中的所有同步任务执行完毕（此时JS引擎空闲），系统就会读取任务队列，将可运行的异步任务添加到可执行栈中，开始执行
	```
